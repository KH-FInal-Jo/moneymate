<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="CAdminMapper">


	<resultMap type="CBoard" id="board_rm">

		<id property="boardNo" column="BOARD_NO" />

		<result property="boardTitle" column="BOARD_TITLE" />
		<result property="boardCode" column="BOARD_CODE" />
		<result property="boardContent" column="BOARD_CONTENT" />
		<result property="boardCreateDate" column="BOARD_DT" />
		<result property="boardUpdateDate" column="BOARD_UPDATE_DT" />
		<result property="readCount" column="READ_COUNT" />
		<result property="commentCount" column="COMMENT_COUNT" />
		<result property="likeCount" column="LIKE_COUNT" />
		<result property="memberNickname" column="MEMBER_NICKNAME" />
		<result property="memberId" column="MEMBER_EMAIL" />

		<result property="memberNo" column="MEMBER_NO" />
		<result property="profileImage" column="PROFILE_IMG" />

		<result property="thumbnail" column="THUMBNAIL" />

	</resultMap>
	
	
	
	<resultMap type="CReport" id="report_rm">
		<id property="reportNo" column="REPORT_NO" />

		<result property="reportedNo" column="REPORTED_NO" />
		<result property="reportContent" column="REPORT_CONTENT" />
		<result property="boardNo" column="BC_NO" />
		<result property="reportCode" column="REPORT_CODE" />
		<result property="reportCategory" column="CATEGORY" />
		<result property="reportDate" column="REPORT_DATE" />
		<result property="reportState" column="REPORT_ST" />
	</resultMap>
	
	
	<select id="getListCount" resultType="_int">
		SELECT COUNT(*) FROM REPORT
		WHERE REPORT_ST = 'N'
	</select>
	
	
	<select id="selectReportList" resultMap="report_rm">
		SELECT REPORTED_NO, MEMBER_NICKNAME,MEMBER_EMAIL, BOARD_CONTENT, REPORT_CONTENT, REPORT_DATE
		FROM "REPORT" 
		JOIN MEMBER M ON (M.MEMBER_NO = REPORTED_NO)
		JOIN "BOARD" B ON (B.MEMBER_NO = REPORTED_NO)
		WHERE BC_NO = BOARD_NO
		AND REPORT_ST = 'N'
	</select>
	
	
	
	
</mapper>
